---
title: "Query Demo"
description: Queries, suspense, and real-time data fetching from mainnet ICP ledgers
editUrl: false
---

import { Aside, LinkCard, CardGrid } from "@astrojs/starlight/components"

A comprehensive example showing queries, suspense, and real-time data fetching from mainnet ICP ledgers.

## Features Demonstrated

- `createActorSuspenseQuery` for static queries
- `createActorSuspenseQueryFactory` for dynamic queries with args
- `DisplayReactor` for automatic type transformations
- Multi-token support (ICP, ckBTC, ckETH)
- Internet Identity authentication
- Balance formatting and display

## Links

<CardGrid>
  <LinkCard
    title="Open in StackBlitz"
    description="Edit and run in your browser"
    href="https://stackblitz.com/github/b3pay/ic-reactor/tree/main/examples/query-demo?embed=1&theme=dark&file=src/reactor.ts"
  />
  <LinkCard
    title="View on GitHub"
    description="Browse the source code"
    href="https://github.com/b3pay/ic-reactor/tree/main/examples/query-demo"
  />
</CardGrid>

## Live Preview

<iframe
  src="https://stackblitz.com/github/b3pay/ic-reactor/tree/main/examples/query-demo?embed=1&theme=dark&file=src/reactor.ts&view=preview"
  style="width: 100%; height: 600px; border: 0; border-radius: 8px; overflow: hidden;"
  title="IC Reactor Query Demo"
  allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
  sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
/>

## Key Code

```typescript
// Setup with DisplayReactor for human-readable display values
export const icpReactor = new DisplayReactor<Ledger>({
  clientManager,
  canisterId: "ryjl3-tyaaa-aaaaa-aaaba-cai", // ICP Ledger mainnet
  idlFactory: ledgerIdlFactory,
})

// Static query - no args needed
export const icpNameQuery = createActorSuspenseQuery(icpReactor, {
  functionName: "icrc1_name",
})

// Factory for dynamic queries with args
export const getIcpBalance = createActorSuspenseQueryFactory(icpReactor, {
  functionName: "icrc1_balance_of",
  select: (balance) => formatBalance(balance, "ICP"),
})
```

<Aside type="tip">
  This example connects to mainnet canisters (ICP, ckBTC, ckETH ledgers), so it
  works without a local replica. Perfect for testing in StackBlitz!
</Aside>
