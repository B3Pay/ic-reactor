---
title: createAuthHooks
description: Create authentication hooks for Internet Identity
editUrl: false
---

import { Aside } from "@astrojs/starlight/components"

`createAuthHooks` is a factory function that creates React hooks for managing Internet Identity authentication. The hooks are bound to a specific `ClientManager` instance.

## Import

```typescript
import { createAuthHooks } from "@ic-reactor/react"
```

## Usage

```typescript
import { createAuthHooks } from "@ic-reactor/react"
import { clientManager } from "./reactor"

const { useAuth, useUserPrincipal, useAgentState } =
  createAuthHooks(clientManager)
```

## Parameters

| Parameter       | Type            | Description                           |
| --------------- | --------------- | ------------------------------------- |
| `clientManager` | `ClientManager` | The ClientManager instance to bind to |

## Return Value

`createAuthHooks` returns an object containing:

| Property                                                                        | Type | Description                          |
| ------------------------------------------------------------------------------- | ---- | ------------------------------------ |
| [`useAuth`](/ic-reactor/v3/reference/createauthhooks/useauth)                   | Hook | Main hook for auth actions and state |
| [`useUserPrincipal`](/ic-reactor/v3/reference/createauthhooks/useuserprincipal) | Hook | Current user's Principal             |
| [`useAgentState`](/ic-reactor/v3/reference/createauthhooks/useagentstate)       | Hook | Agent initialization state           |

## Complete Example

```typescript
// src/reactor/index.ts
import { ClientManager } from "@ic-reactor/core"
import { QueryClient } from "@tanstack/query-core"

export const queryClient = new QueryClient()

export const clientManager = new ClientManager({
  queryClient,
  withProcessEnv: true,
})
```

```typescript
// src/reactor/hooks.ts
import { createAuthHooks } from "@ic-reactor/react"
import { clientManager } from "./index"

export const { useAuth, useUserPrincipal, useAgentState } =
  createAuthHooks(clientManager)
```

```tsx
// src/App.tsx
import { useAgentState } from "./reactor/hooks"
import { QueryClientProvider } from "@tanstack/react-query"
import { queryClient } from "./reactor"

function App() {
  const { isInitializing, error } = useAgentState()

  if (isInitializing) return <LoadingScreen />
  if (error) return <ErrorScreen error={error} />

  return (
    <QueryClientProvider client={queryClient}>
      <Router />
    </QueryClientProvider>
  )
}
```

## Notes

<Aside type="note">
  All actors using the same `ClientManager` share authentication state. When the
  user logs in or out, queries are automatically invalidated.
</Aside>

<Aside type="tip">
  The `@icp-sdk/auth` package is dynamically imported only when `login()` is
  called, keeping your bundle size small if auth isn't used.
</Aside>

## See Also

- [Authentication Guide](/ic-reactor/v3/guides/authentication) — In-depth auth patterns
- [useAuth](/ic-reactor/v3/reference/createauthhooks/useauth) — Main auth hook reference
- [createActorHooks](/ic-reactor/v3/reference/createactorhooks/overview) — Creating actor hooks
- [React Setup](/ic-reactor/v3/framework/react-setup) — Complete React configuration
