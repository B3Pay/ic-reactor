---
title: Vite Plugin
description: Zero-config Vite plugin for IC Reactor
editUrl: false
---

import { Aside, Tabs, TabItem } from "@astrojs/starlight/components"

The `@ic-reactor/vite-plugin` automates the generation of TypeScript declarations and Reactor hooks from your Candid files. It integrates seamlessly with Vite's development server, providing hot-module replacement (HMR) for your canister interfaces.

## Installation

<Tabs syncKey="pm">
  <TabItem label="pnpm" icon="pnpm">
    ```bash pnpm add -D @ic-reactor/vite-plugin ```
  </TabItem>
  <TabItem label="npm" icon="npm">
    ```bash npm install -D @ic-reactor/vite-plugin ```
  </TabItem>
  <TabItem label="yarn" icon="seti:yarn">
    ```bash yarn add -D @ic-reactor/vite-plugin ```
  </TabItem>
  <TabItem label="bun" icon="bun">
    ```bash bun add -D @ic-reactor/vite-plugin ```
  </TabItem>
</Tabs>

## Usage

Add the plugin to your `vite.config.ts`:

```typescript
import { defineConfig } from "vite"
import react from "@vitejs/plugin-react"
import { icReactor } from "@ic-reactor/vite-plugin"

export default defineConfig({
  plugins: [
    react(),
    icReactor({
      canisters: [
        {
          name: "backend",
          didFile: "src/backend/backend.did", // Path to your .did file
        },
      ],
    }),
  ],
})
```

### Reactor Mode (per canister)

By default, generated hooks use `DisplayReactor` (backward compatible). Set `mode` on a canister to generate hooks with `Reactor` instead.

```typescript
icReactor({
  canisters: [
    { name: "backend", didFile: "./backend/backend.did" },
    {
      name: "workflow_engine",
      mode: "Reactor",
      didFile: "./workflow/workflow_engine.did",
    },
  ],
})
```

## Features

### Zero-Config Proxy

The plugin automatically configures a proxy for `/api` requests to your local replica (defaulting to `http://127.0.0.1:4943`). This ensures your frontend can communicate with backend canisters during development without CORS issues.

### Automatic `ic_env` Injection

The plugin automatically detects your network environment and canister IDs using the `icp` or `dfx` CLI. It injects this information into the `ic_env` cookie. This allows `ClientManager` to automatically resolve the correct canister IDs and network root key without manual configuration.

### Hot Module Replacement

The plugin watches your `.did` files. When you modify a Candid file, it automatically:

1. Regenerates the TypeScript declarations (`.d.ts`, `.js` factory).
2. Regenerates `index.ts` with fully typed hooks when the file is still managed by codegen.
3. Preserves your `index.ts` if you overwrite/customize it manually.
4. Restarts the Vite server to pick up the changes.

## Configuration Options

| Option              | Type               | Description                                          | Default              |
| :------------------ | :----------------- | :--------------------------------------------------- | :------------------- |
| `canisters`         | `CanisterConfig[]` | List of canisters to generate hooks for (required).  | -                    |
| `outDir`            | `string`           | Base output directory for generated files.           | `"src/declarations"` |
| `injectEnvironment` | `boolean`          | Whether to inject canister IDs into `ic_env` cookie. | `true`               |
| `clientManagerPath` | `string`           | Path to a custom `ClientManager` instance.           | `"../../clients"`    |

### Canister Config

| Option              | Type                            | Description                                     | Required |
| :------------------ | :------------------------------ | :---------------------------------------------- | :------- |
| `name`              | `string`                        | Name of the canister (used in generated code).  | Yes      |
| `didFile`           | `string`                        | Path to the `.did` file.                        | Yes      |
| `outDir`            | `string`                        | Override output directory for this canister.    | No       |
| `clientManagerPath` | `string`                        | Override client manager path for this canister. | No       |
| `mode`              | `"Reactor" \| "DisplayReactor"` | Reactor class for generated hooks.              | No       |
| `canisterId`        | `string`                        | Optional fixed canister ID.                     | No       |

## Examples

Check out these examples to see the Vite plugin in action:

- **[Vite Plugin Demo](/v3/examples/vite-plugin)**: Basic usage of the Vite plugin for automatic hook generation.
- **[Vite Environment Variables](/v3/examples/vite-env)**: Using the plugin to automatically inject canister IDs and root keys.
- **[Codegen in Action](/v3/examples/codegen-in-action)**: Comparison between Vite plugin and CLI output.
