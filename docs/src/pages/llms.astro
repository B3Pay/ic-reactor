---
// Simple runtime page that fetches /llms.txt and provides copy & download
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>LLMs Context — IC Reactor</title>
    <style>
      body { font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; padding: 32px; }
      h1 { font-size: 1.5rem; margin-bottom: 8px; }
      .controls { display:flex; gap:8px; margin-bottom:12px; }
      button, a.button { background:#6366f1; color:white; border:none; padding:8px 12px; border-radius:6px; cursor:pointer; text-decoration:none; }
      pre { background:#0f172a; color:#e6eef8; padding:16px; border-radius:8px; white-space:pre-wrap; word-break:break-word; max-height:60vh; overflow:auto; }
      .muted { color:#6b7280 }
    </style>
  </head>
  <body>
    <h1>LLMs Context</h1>
    <p class="muted">This file provides a concise project overview you can feed into LLMs.</p>

    <div class="controls">
      <button id="copy">Copy to clipboard</button>
      <a class="button" id="download" href="/llms.txt" download>Download</a>
      <span id="status" class="muted" style="align-self:center;margin-left:8px">Loading…</span>
    </div>

    <pre id="content">Loading…</pre>

    <script>
      async function load() {
        const status = document.getElementById('status');
        const contentEl = document.getElementById('content');
        try {
          const r = await fetch('/llms.txt');
          if (!r.ok) throw new Error('Not found');
          const text = await r.text();
          contentEl.textContent = text;
          status.textContent = 'Loaded';
        } catch (err) {
          contentEl.textContent = 'Could not load /llms.txt. You can still download the file directly: /llms.txt';
          status.textContent = 'Failed to load';
        }
      }

      document.getElementById('copy').addEventListener('click', async () => {
        const content = document.getElementById('content').textContent;
        try {
          await navigator.clipboard.writeText(content);
          const s = document.getElementById('status');
          s.textContent = 'Copied to clipboard';
          setTimeout(()=> s.textContent = 'Loaded', 1500);
        } catch (err) {
          alert('Copy failed. Please select and copy manually.');
        }
      });

      load();
    </script>
  </body>
</html>