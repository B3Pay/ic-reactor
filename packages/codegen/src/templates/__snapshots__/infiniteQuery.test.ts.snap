// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`Infinite Query Hook Generation > generates infinite query hook correctly 1`] = `
"/**
 * Infinite Query: list_items
 *
 * Auto-generated by @ic-reactor/codegen
 *
 * ⚠️ CUSTOMIZATION REQUIRED: Configure getArgs and getNextPageParam below.
 *
 * @example
 * const { data, fetchNextPage, hasNextPage } = listItemsInfiniteQuery.useInfiniteQuery()
 * const allItems = data?.pages.flatMap(page => page.items) ?? []
 */

import { createInfiniteQuery } from "@ic-reactor/react"
import { myCanisterReactor, type MyCanisterService } from "../reactor"

/** Define your pagination cursor type */
type PageCursor = number

export const listItemsInfiniteQuery = createInfiniteQuery(myCanisterReactor, {
  functionName: "list_items",

  initialPageParam: 0 as PageCursor,

  /** Convert page param to method arguments — customize for your API */
  getArgs: (pageParam: PageCursor) => {
    return [{ offset: pageParam, limit: 10 }] as Parameters<MyCanisterService["list_items"]>
  },

  /** Extract next page param — return undefined when no more pages */
  getNextPageParam: (lastPage, allPages, lastPageParam) => {
    // Example: offset-based
    // if (lastPage.items.length < 10) return undefined
    // return lastPageParam + 10
    return undefined
  },
})

/** React hook for paginated list_items */
export const useListItemsInfiniteQuery = listItemsInfiniteQuery.useInfiniteQuery
"
`;
