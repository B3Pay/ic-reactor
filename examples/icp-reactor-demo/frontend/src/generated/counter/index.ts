/**
 * AUTO-GENERATED BY @ic-reactor/vite-plugin
 * DO NOT EDIT MANUALLY
 *
 * Canister: counter
 * Generated: 2026-01-09T12:04:49.120Z
 *
 * This file provides type-safe React hooks for interacting with the
 * counter canister using ic-reactor.
 */

import { DisplayReactor, createQuery, createMutation } from "@ic-reactor/react"
import { safeGetCanisterEnv } from "@icp-sdk/core/agent/canister-env"

// ═══════════════════════════════════════════════════════════════════════════
// USER-PROVIDED CLIENT MANAGER
// ═══════════════════════════════════════════════════════════════════════════
// The clientManager is imported from the user's own configuration file.
// This allows full customization of agent options, network settings, etc.
import { clientManager } from "../../lib/client"

// Import generated declarations from @icp-sdk/bindgen
import { idlFactory, type _SERVICE } from "./declarations/counter.did"

// ═══════════════════════════════════════════════════════════════════════════
// CANISTER ID RESOLUTION
// ═══════════════════════════════════════════════════════════════════════════

interface CounterCanisterEnv {
  readonly "PUBLIC_CANISTER_ID:counter": string
}

type CounterService = _SERVICE

/**
 * Get canister ID from runtime environment (ic_env cookie)
 * Falls back to a placeholder in development
 */
function getCounterCanisterId(): string {
  const env = safeGetCanisterEnv<CounterCanisterEnv>()

  if (env?.["PUBLIC_CANISTER_ID:counter"]) {
    return env["PUBLIC_CANISTER_ID:counter"]
  }

  throw new Error("[ic-reactor] counter canister ID not found in ic_env cookie")
}

// ═══════════════════════════════════════════════════════════════════════════
// REACTOR INSTANCE
// ═══════════════════════════════════════════════════════════════════════════

/**
 * Counter Reactor with Display type transformations.
 * Automatically converts bigint → string, Principal → string, etc.
 */
export const counterReactor = new DisplayReactor<_SERVICE>({
  clientManager,
  canisterId: getCounterCanisterId(),
  idlFactory,
  name: "counter",
})

// ═══════════════════════════════════════════════════════════════════════════
// QUERY HOOKS
// ═══════════════════════════════════════════════════════════════════════════

export const useGetCountQuery = (
  args: Parameters<CounterService["get_count"]>,
  options?: any
) =>
  createQuery(counterReactor, {
    functionName: "get_count",
    args,
  }).useQuery(options)

// ═══════════════════════════════════════════════════════════════════════════
// MUTATION HOOKS
// ═══════════════════════════════════════════════════════════════════════════

export const useIncrementMutation = (options?: any) =>
  createMutation(counterReactor, {
    functionName: "increment",
    ...options,
  }).useMutation(options)

// ═══════════════════════════════════════════════════════════════════════════
// RE-EXPORTS
// ═══════════════════════════════════════════════════════════════════════════

export { idlFactory }
export type { CounterService }
